<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Boodschappen App</title>

<!-- Fullscreen app -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="icon.png">

<!-- jsPDF voor PDF export -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- Styles -->
<style>
  body { font-family: Arial, sans-serif; text-align: center; padding: 20px; background: #f0f4f8; }
  h1 { color: #007aff; }
  .dish { background: #fff; border-radius: 10px; padding: 15px; margin: 10px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
  .dish.selected { border: 2px solid #007aff; }
  button { background: #007aff; color: white; padding: 10px 20px; border: none; border-radius: 10px; font-size: 16px; cursor: pointer; margin: 10px; }
  button:active { background: #005bb5; }
  #cart { margin-top: 20px; text-align: left; }
  h2 { color: #007aff; margin-top: 30px; }
</style>
</head>
<body>

<h1>Mini Boodschappen App</h1>

<div id="dishes">
  <!-- Gerechten verschijnen hier via JS -->
</div>

<button onclick="addToCart()">Voeg toe aan boodschappenwagen üõí</button>
<button onclick="showCart()">Bekijk boodschappenwagen üõí</button>
<button onclick="exportPDF()">Download PDF üìù</button>

<div id="cart"></div>

<script>
  // Definieer gerechten en ingredi√´nten
  const dishes = [
    { name: "Pasta", ingredients: [
      {item: "Pasta", category: "Pasta/Rijst"},
      {item: "Tomatensaus", category: "Sauzen"},
      {item: "Kaas", category: "Zuivel"}
    ]},
    { name: "Salade", ingredients: [
      {item: "Sla", category: "Groente"},
      {item: "Tomaat", category: "Groente"},
      {item: "Komkommer", category: "Groente"}
    ]},
    { name: "Omelet", ingredients: [
      {item: "Eieren", category: "Zuivel"},
      {item: "Spek", category: "Vlees"},
      {item: "Paprika", category: "Groente"}
    ]}
  ];

  const selectedDishes = new Set();
  let shoppingCart = [];

  // Toon gerechten
  const dishesDiv = document.getElementById("dishes");
  dishes.forEach((dish, idx) => {
    const div = document.createElement("div");
    div.className = "dish";
    div.id = "dish-" + idx;
    div.innerHTML = `<h3>${dish.name}</h3><ul>${dish.ingredients.map(i=>`<li>${i.item}</li>`).join("")}</ul>`;
    div.onclick = () => {
      div.classList.toggle("selected");
      if(selectedDishes.has(idx)) selectedDishes.delete(idx);
      else selectedDishes.add(idx);
    };
    dishesDiv.appendChild(div);
  });

  // Voeg toe aan cart
  function addToCart() {
    shoppingCart = []; // reset voor demo
    selectedDishes.forEach(idx => {
      shoppingCart.push(...dishes[idx].ingredients);
    });
    alert("Ingredi√´nten toegevoegd aan de boodschappenwagen!");
  }

  // Toon cart overzicht
  function showCart() {
    const cartDiv = document.getElementById("cart");
    if(shoppingCart.length === 0) {
      cartDiv.innerHTML = "<p>Boodschappenwagen is leeg.</p>";
      return;
    }
    // Groepeer per categorie
    const categories = {};
    shoppingCart.forEach(i => {
      if(!categories[i.category]) categories[i.category] = [];
      if(!categories[i.category].includes(i.item)) categories[i.category].push(i.item);
    });

    let html = "<h2>Boodschappenwagen</h2>";
    for(const cat in categories){
      html += `<h3>${cat}</h3><ul>`;
      categories[cat].forEach(item => { html += `<li>${item}</li>`; });
      html += "</ul>";
    }
    cartDiv.innerHTML = html;
  }

  // Export PDF
  function exportPDF() {
    if(shoppingCart.length === 0){
      alert("Boodschappenwagen is leeg!");
      return;
    }
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFontSize(18);
    doc.text("Boodschappenlijst", 10, 20);
    let y = 30;

    // Groepeer per categorie
    const categories = {};
    shoppingCart.forEach(i => {
      if(!categories[i.category]) categories[i.category] = [];
      if(!categories[i.category].includes(i.item)) categories[i.category].push(i.item);
    });

    for(const cat in categories){
      doc.setFontSize(14);
      doc.text(cat, 10, y);
      y += 8;
      doc.setFontSize(12);
      categories[cat].forEach(item => { doc.text("- " + item, 15, y); y += 7; });
      y += 5;
    }

    doc.save("boodschappenlijst.pdf");
  }
</script>
</body>
</html>
